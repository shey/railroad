# {{ ansible_managed }}

# /etc/sysctl.conf - Configuration file for setting system variables
# See /etc/sysctl.d/ for additional system variables.
# See sysctl.conf (5) for information.

# see: https://www.cyberciti.biz/tips/linux-unix-bsd-nginx-webserver-security.html
# see: https://www.cyberciti.biz/faq/linux-tcp-tuning/

# prevent some spoofing attacks
net.ipv4.conf.default.rp_filter         =   1
net.ipv4.conf.all.rp_filter             =   1

# for omnibus hosts
vm.swappiness                           =   5

# increase number of incoming connections
net.core.somaxconn                      =   4096

# Increase system file descriptor limit
fs.file-max                             =   65535

# Increase TCP max buffer size setable using setsockopt()
net.ipv4.tcp_rmem                       =   4096 87380 8388608
net.ipv4.tcp_wmem                       =   4096 87380 8388608
net.core.rmem_max                       =   8388608
net.core.wmem_max                       =   8388608

# Disable TCP slow start on idle connections
net.ipv4.tcp_slow_start_after_idle      =   0

# Set maximum number of packets, queued on the INPUT side,
# when the interface receives packets faster than kernel
# can process them.
net.core.netdev_max_backlog             =   50000
